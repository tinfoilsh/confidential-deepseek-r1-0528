shim-version: v0.3.9@sha256:a45eb01f8e5fa3162b804821d53d8e8667a75940a9c1995f29265347efca8009
cvm-version: 0.6.4
cpus: 32
memory: 524288
gpus: full

models:
  - name: "deepseek-r1-0528"
    repo: "deepseek-ai/DeepSeek-R1-0528@4236a6af538feda4548eca9ab308586007567f52"
    mpk: "1cacd16f763afa07848c18e564b35699aef1530357873bd9ddd483626312b178_688604053504_16d2e2df-0159-5413-9396-337d023ceb3b"
  
containers:
  - name: "deepseek-r1-0528"
    image: ""
    args: [
      "--runtime", "nvidia",
      "--gpus", "all",
      "--ipc", "host",  
      "vllm/vllm-openai:v0.14.0@sha256:1d6866b87630d94f5e0cdae55ab5abb4ce0b03fcb84d9d10612f9d518d19d4fd",
      "--model", "/tinfoil/mpk/mpk-1cacd16f763afa07848c18e564b35699aef1530357873bd9ddd483626312b178",
      "--tensor-parallel-size", "8",
      "--max-model-len", "131072",
      "--served-model-name", "deepseek-r1-0528",
      "--gpu-memory-utilization", "0.95",
      "--enable-auto-tool-choice",
      "--tool-call-parser", "deepseek_v3",
      "--chat-template", "examples/tool_chat_template_deepseekr1.jinja",
      "--port", "8001"
    ]

shim:
  listen-port: 443
  upstream-port: 8001
  authenticated: true
  paths:
    - /v1/chat/completions
    - /metrics
    - /health
